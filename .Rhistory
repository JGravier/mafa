library(devtools)
check()
check()
use_gpl3_license()
check()
check()
check()
install()
if (interactive()) {
suppressMessages(require(devtools))
}
use_devtools()
devtools::dev_sitrep()
update_packages("devtools")
update_packages("devtools")
devtools::dev_sitrep()
st_filter(x = rouen_1827, y = rouen_1827, .predicate = st_touches)
library(sf)
st_filter(x = rouen_1827, y = rouen_1827, .predicate = st_touches)
load_all()
st_filter(x = rouen_1827, y = rouen_1827, .predicate = st_touches)
rouen_1827
st_join(x = rouen_1827, y = rouen_1827, join = st_touches)
library(tidyverse)
st_join(x = rouen_1827, y = rouen_1827 %>% rename(rowid2 = rowid), join = st_touches) %>%
geom <- list()
for(i in 1:nrow(rouen_1827)) {
geom[[i]] = st_union(rouen_1827[rouen_1827[i, ], ])
}
do.call(c, geom)
geomnew <- do.call(c, geom)
plot(geomnew)
View(geomnew)
plot(geomnew[10])
plot(geomn[10])
plot(geom[10])
plot(rouen_1827[10]$)
plot(rouen_1827[10]$geometry)
plot(rouen_1827$geometry[10])
plot(geom[10], add=T)
plot(geom[10], add=TRUE)
plot(geomnew[10], add=TRUE)
plot(geomnew[10])
plot(rouen_1827$geometry[10])
plot(geomnew[10])
plot(rouen_1827$geometry[10], add=TRUE)
plot(geomnew[200])
plot(geomnew[20])
plot(rouen_1827$geometry[10], add=TRUE)
plot(geomnew[15])
plot(rouen_1827$geometry[10], add=TRUE)
st_join(x = rouen_1827, y = rouen_1827 %>% rename(rowid2 = rowid), join = st_touches)
touches <- st_join(x = rouen_1827, y = rouen_1827 %>% rename(rowid2 = rowid), join = st_touches)
morphalr_circularity(sfpolygons = rouen_1827) %>%
ggplot() +
geom_sf(aes(fill = miller_index), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
morphalr_circularity(sfpolygons = rouen_1827) %>%
ggplot() +
geom_sf(aes(fill = miller_index), color = 'grey90', linewidth = 0.05) +
scale_fill_fermenter(direction = -1, n.breaks=7) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
morphalr_circularity(sfpolygons = rouen_1827) %>%
filter(miller_index >0.94) %>%
ggplot() +
geom_sf(aes(fill = miller_index), color = 'grey90', linewidth = 0.05) +
scale_fill_fermenter() +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
morphalr_circularity(sfpolygons = rouen_1827) %>%
filter(miller_index >0.80) %>%
ggplot() +
geom_sf(aes(fill = miller_index), color = 'grey90', linewidth = 0.05) +
scale_fill_fermenter() +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
morphalr_circularity(sfpolygons = rouen_1827) %>%
ggplot() +
geom_sf(aes(fill = miller_index), color = 'grey90', linewidth = 0.05) +
scale_fill_fermenter() +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
morphalr_dsc(sfpolygons = rouen_1827) %>%
ggplot() +
geom_sf(aes(fill = dsc), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
help("morphalr_circularity")
document()
help("morphalr_circularity")
document()
help("morphalr_circularity")
document()
help("morphalr_circularity")
document()
help("morphalr_circularity")
document()
help("morphalr_circularity")
document()
help("morphalr_circularity")
document()
help("morphalr_circularity")
help("morphalr_circularity")
document()
help("morphalr_circularity")
help("morphalr_dsr")
help("morphalr_dsc")
help("morphalr_dsr")
?st_simplify
document()
help("morphalr_complexity")
document()
help("morphalr_complexity")
document()
help("morphalr_complexity")
document()
help("morphalr_complexity")
document()
help("morphalr_complexity")
sf::npts(rouen_1827)
st_coordinates(x = rouen_1827)
st_coordinates(x = rouen_1827) %>% as_tibble() %>% group_by(L2) %>% count()
?count
check()
document()
morphalr_complexity(sfpolygons = rouen_1827, dTolerance = 250)
rlang::last_trace()
sfpolygons_as_multilinestring <- sf::st_cast(x = rouen_1827, to = "MULTILINESTRING")
perimeter_polygon <- tibble::tibble(perimeter_polygon = as.numeric(sf::st_length(x = sfpolygons_as_multilinestring)))
perimeter_polygon
# simplify geometry
blob <- rouen_1827 |>
sf::st_simplify(dTolerance = 250)
blob
# simplify geometry
blob <- rouen_1827 |>
sf::st_simplify(dTolerance = 100)
blob
rouen_1827
# simplify geometry
blob <- rouen_1827 |>
sf::st_simplify(preserveTopology = TRUE, dTolerance = 100)
blob
morphalr_complexity(sfpolygons = rouen_1827, dTolerance = 250)
rlang::last_trace()
# count vertices
count_vertices <- sf::st_coordinates(x = blob) |>
tibble::as_tibble() |>
dplyr::group_by(.data$L2) |>
dplyr::count() |>
dplyr::select(.data$n)
count_vertices
# simplify geometry
blob <- rouen_1827 |>
sf::st_simplify(preserveTopology = TRUE, dTolerance = 20)
# count vertices
count_vertices <- sf::st_coordinates(x = blob) |>
tibble::as_tibble() |>
dplyr::group_by(.data$L2) |>
dplyr::count() |>
dplyr::select(.data$n)
count_vertices
View(count_vertices)
# count vertices
count_vertices <- sf::st_coordinates(x = rouen_1827) |>
tibble::as_tibble() |>
dplyr::group_by(.data$L2) |>
dplyr::count() |>
dplyr::select(.data$n)
count_vertices
# simplify geometry
blob <- rouen_1827 |>
sf::st_simplify(preserveTopology = TRUE, dTolerance = 5)
# count vertices
count_vertices <- sf::st_coordinates(x = blob) |>
tibble::as_tibble() |>
dplyr::group_by(.data$L2) |>
dplyr::count() |>
dplyr::select(.data$n)
count_vertices
# simplify geometry
blob <- rouen_1827 |>
sf::st_simplify(preserveTopology = FALSE, dTolerance = 5)
# count vertices
count_vertices <- sf::st_coordinates(x = blob) |>
tibble::as_tibble() |>
dplyr::group_by(.data$L2) |>
dplyr::count() |>
dplyr::select(.data$n)
count_vertices
rouen_1827 |>
sf::st_simplify(preserveTopology = FALSE, dTolerance = 5)
# simplify geometry
blob <- rouen_1827 |>
sf::st_simplify()
blob
# count vertices
count_vertices <- sf::st_coordinates(x = blob) |>
tibble::as_tibble() |>
dplyr::group_by(.data$L2) |>
dplyr::count() |>
dplyr::select(.data$n)
count_vertices
sf::st_coordinates(x = rouen_1827) |>
tibble::as_tibble() |>
dplyr::group_by(.data$L2) |>
dplyr::count() |>
dplyr::select(.data$n)
?st_simplify
# simplify geometry
blob <- rouen_1827 |>
sf::st_simplify(dTolerance = 5)
blob
rouen_1827
load_all()
morphalr_complexity(sfpolygons = rouen_1827)
rlang::last_trace()
load_all()
morphalr_complexity(sfpolygons = rouen_1827)
morphalr_complexity(sfpolygons = rouen_1827) %>%
ggplot() +
geom_sf(aes(fill = dsc), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
load_all()
morphalr_complexity(sfpolygons = rouen_1827)
morphalr_complexity(sfpolygons = rouen_1827) %>%
ggplot() +
geom_sf(aes(fill = complexity_index), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
load_all()
morphalr_complexity(sfpolygons = rouen_1827) %>%
ggplot() +
geom_sf(aes(fill = complexity_index), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
load_all()
morphalr_complexity(sfpolygons = rouen_1827) %>%
ggplot() +
geom_sf(aes(fill = complexity_index), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
morphalr_complexity(sfpolygons = rouen_1827) %>% view()
morphalr_complexity(sfpolygons = rouen_1827) -> blobi
plot(blobi$geometry)
plot(blobi$geometry[1762], add = TRUE)
plot(blobi$geometry[1762], add = TRUE, col='red')
morphalr_complexity(sfpolygons = rouen_1827) %>%
ggplot() +
geom_sf(aes(fill = complexity_index), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
morphalr_complexity(sfpolygons = rouen_1827) %>%
filter(complexity_index > 1) %>%
ggplot() +
geom_sf(aes(fill = complexity_index), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
morphalr_complexity(sfpolygons = st_simplify(rouen_1827, dTolerance = 25)) %>%
filter(complexity_index > 1) %>%
ggplot() +
geom_sf(aes(fill = complexity_index), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
st_simplify(rouen_1827, dTolerance = 25)
morphalr_complexity(sfpolygons = st_simplify(rouen_1827, dTolerance = 25)) %>%
filter(complexity_index > 2) %>%
ggplot() +
geom_sf(aes(fill = complexity_index), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
morphalr_complexity(sfpolygons = rouen_1827) %>%
filter(complexity_index > 2) %>%
ggplot() +
geom_sf(aes(fill = complexity_index), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
st_write(obj = morphalr_complexity(sfpolygons = rouen_1827) %>%
filter(complexity_index > 2), dsn = 'blobi.gpkg')
morphalr_complexity(sfpolygons = rouen_1827) %>%
filter(complexity_index < 1) %>%
ggplot() +
geom_sf(aes(fill = complexity_index), color = 'grey90', linewidth = 0.05) +
scale_fill_viridis_c(direction = -1) +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank())
st_simplify(rouen_1827, dTolerance = 25)
st_simplify(rouen_1827, dTolerance = 25) %>% view()
57/10000
check()
usethis::use_vignette("my-vignette")
build_vignettes(pkg = ".")
check()
install.packages("kableExtra")
library(kableExtra)
tibble(indices = c("orientations of segments of polygons or lines", "distance of polygons to their minimal bounding rectangles", "distance of polygons to their convex hull", "Miller circularity index of polygons", "morphological complexity of polygons"),
`function name` = c("morphalr_segment_orientation", "morphalr_dsr", "morphalr_dsc", "morphalr_circularity",
"morphalr_complexity")) |>
kable()
library(kableExtra)
tibble(indices = c("orientations of segments of polygons or lines", "distance of polygons\nto their minimal bounding rectangles", "distance of polygons to their convex hull", "Miller circularity index of polygons", "morphological complexity of polygons"),
`function name` = c("morphalr_segment_orientation", "morphalr_dsr", "morphalr_dsc", "morphalr_circularity",
"morphalr_complexity")) |>
kable()
library(kableExtra)
tibble(indices = c("orientations of segments of polygons or lines", "distance of polygons to their minimal bounding rectangles", "distance of polygons to their convex hull", "Miller circularity index of polygons", "morphological complexity of polygons"),
`function name` = c("morphalr_segment_orientation", "morphalr_dsr", "morphalr_dsc", "morphalr_circularity",
"morphalr_complexity")) |>
kable_minimal()
library(kableExtra)
tibble(indices = c("orientations of segments of polygons or lines", "distance of polygons to their minimal bounding rectangles", "distance of polygons to their convex hull", "Miller circularity index of polygons", "morphological complexity of polygons"),
`function name` = c("morphalr_segment_orientation", "morphalr_dsr", "morphalr_dsc", "morphalr_circularity",
"morphalr_complexity")) |>
kbl() |>
kable_minimal()
| Function name | Indices |
remove.packages("morphalr")
library(remotes)
install_github(repo = "JGravier/morphalr")
library(morphalr)
library(remotes)
install_github(repo = "JGravier/morphalr", force = TRUE)
### orientation parcelles> test oasis
library(sf)
library(tidyverse)
dataparcels <- st_read(dsn = "UCOP_PARCELS_CORE_AREA.shp")
segments <- morphalr::morphalr_geom_to_segment(sfobject = dataparcels, to = "LINESTRING")
dataparcels
dataparcels <- st_read(dsn = "UCOP_PARCELS_CORE_AREA.shp") %>%
st_cast(to = "POLYGON")
segments <- morphalr::morphalr_geom_to_segment(sfobject = dataparcels, to = "LINESTRING")
orientationparcels <- morphalr::morphalr_segment_orientation(sfsegments = segments)
orientationparcels |>
ggplot() +
geom_sf(aes(color = orientation)) +
scale_color_viridis_c() +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank(), panel.grid = element_blank())
orientationparcels <- morphalr::morphalr_segment_orientation(sfsegments = segments, perpendicular = TRUE)
orientationparcels |>
ggplot() +
geom_sf(aes(color = orientation)) +
scale_color_viridis_c() +
theme_bw() +
theme(axis.ticks = element_blank(), axis.text = element_blank(), panel.grid = element_blank())
library(tmap)
tmap_mode(mode = 'view')
tm_shape(dataparcels) + tm_polygons()
tm_shape(dataparcels, check.and.fix = TRUE) + tm_polygons()
tm_shape(dataparcels) + tm_polygons(check.and.fix = TRUE)
tmap_options(check.and.fix = TRUE)
tm_shape(dataparcels) + tm_polygons( + tmap_options(check.and.fix = TRUE)
tm_shape(dataparcels) + tm_polygons() + tmap_options(check.and.fix = TRUE)
tm_shape(dataparcels) + tm_polygons()
tm_shape(segments) + tm_lines()
